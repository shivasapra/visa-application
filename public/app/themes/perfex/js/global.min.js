function init_progress_bars(){setTimeout(function(){$(".progress .progress-bar").each(function(){var e=$(this),t=e.attr("data-percent"),a=0,i=setInterval(function(){a>=t?(clearInterval(i),0==t&&e.css("width","0%")):(a+=1,e.css("width",a+"%")),e.hasClass("no-percent-text")||e.text(a+"%")},10)})},300)}function init_color_pickers(){$("body").find(".colorpicker-input").colorpicker({format:"hex"})}function init_datepicker(){var e=$(".datepicker"),t=$(".datetimepicker");if(0!=t.length||0!=e.length){$.each(e,function(){var e=$(this),t={timepicker:!1,scrollInput:!1,lazyInit:!0,format:date_format,dayOfWeekStart:calendar_first_day},a=e.data("date-end-date"),i=e.data("date-min-date");a&&(t.maxDate=a),i&&(t.minDate=i),e.datetimepicker(t),e.parents(".form-group").find(".calendar-icon").on("click",function(){e.focus(),e.trigger("open.xdsoft")})});var a;$.each(t,function(){var e=$(this);a={lazyInit:!0,scrollInput:!1,validateOnBlur:!1,dayOfWeekStart:calendar_first_day},24==time_format?a.format=date_format+" H:i":(a.format=date_format+" g:i A",a.formatTime="g:i A");var t=e.data("date-end-date"),i=e.data("date-min-date");t&&(a.maxDate=t),i&&(a.minDate=i),e.datetimepicker(a),e.parents(".form-group").find(".calendar-icon").on("click",function(){e.focus(),e.trigger("open.xdsoft")})})}}function is_mobile(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function alert_float(e,t){var a,i;a=$("body").find("float-alert").length,a="alert_float_"+ ++a,i=$('<div id="'+a+'" class="float-alert animated fadeInRight col-xs-11 col-sm-4 alert alert-'+e+'"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><span class="fa fa-bell-o" data-notify="icon"></span><span class="alert-title">'+t+"</span></div>"),$("body").append(i),setTimeout(function(){$("#"+a).hide("fast",function(){$("#"+a).remove()})},4e3)}function buildUrl(e,t){var a="";for(var i in t){var n=t[i];a+=encodeURIComponent(i)+"="+encodeURIComponent(n)+"&"}return a.length>0&&(e=e+"?"+(a=a.substring(0,a.length-1))),e}$.validator.setDefaults({highlight:function(e){var t=$(e).parents(".tab-pane");t.length&&!t.is(":visible")&&$('a[href="#'+t.attr("id")+'"]').css("border-bottom","1px solid red").css("color","red").addClass("tab-validation"),setTimeout(function(){$(e).closest(".form-group").addClass("has-error")},200)},unhighlight:function(e){var t=(e=$(e)).parents(".tab-pane");t.length&&$('a[href="#'+t.attr("id")+'"]').removeAttr("style").removeClass("tab-validation"),e.closest(".form-group").removeClass("has-error")},errorElement:"p",errorClass:"text-danger",errorPlacement:function(e,t){t.parent(".input-group").length||t.parents(".chk").length?t.parents(".chk").length?e.insertAfter(t.parents(".chk")):e.insertAfter(t.parent()):t.is("select")&&(t.hasClass("selectpicker")||t.hasClass("ajax-search"))?e.insertAfter(t.parents(".form-group *").last()):e.insertAfter(t)}}),$.validator.addMethod("filesize",function(e,t,a){return this.optional(t)||t.files[0].size<=a},file_exceeds_max_filesize),$.validator.addMethod("extension",function(e,t,a){return a="string"==typeof a?a.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp("\\.("+a+")$","i"))},$.validator.format(validation_extension_not_allowed)),$(function(){if($("body").on("shown.bs.dropdown",".btn-group",function(){$(this).closest(".table-responsive").css("overflow","inherit")}),$("body").on("hidden.bs.dropdown",".btn-group",function(){$(this).closest(".table-responsive").css("overflow","auto")}),$("body").find("select").selectpicker({showSubtext:!0}),init_progress_bars(),init_color_pickers(),jQuery.datetimepicker.setLocale(locale),init_datepicker(),$("body").tooltip({selector:'[data-toggle="tooltip"]'}),$("body").popover({selector:'[data-toggle="popover"]'}),$("body").on("click",function(e){$('[data-toggle="popover"]').each(function(){$(this).is(e.target)||0!==$(this).has(e.target).length||0!==$(".popover").has(e.target).length||$(this).popover("hide")})}),"undefined"!=typeof lightbox){var e={showImageNumberLabel:!1,resizeDuration:200};lightbox.option(e)}$("body").on("click","._delete",function(e){return 1==confirm(confirm_action_prompt)}),$('select[name="range"]').on("change",function(){var e=$(".period");"period"==$(this).val()?e.removeClass("hide"):(e.addClass("hide"),e.find("input").val(""))}),$(".article_useful_buttons button").on("click",function(e){e.preventDefault();var t={};t.answer=$(this).data("answer"),t.articleid=$('input[name="articleid"]').val(),$.post(site_url+"knowledge_base/add_kb_answer",t).done(function(e){1==(e=JSON.parse(e)).success&&$(this).focusout(),$(".answer_response").html(e.message)})}),$("#identityConfirmationForm").validate({ignore:[],rules:{acceptance_firstname:"required",acceptance_lastname:"required",signature:"required",acceptance_email:{email:!0,required:!0}},messages:{signature:{required:sign_document_validation}}}),$("body.identity-confirmation #accept_action").on("click",function(){var e=$("#identityConfirmationForm");return e.length&&!e.validate().checkForm()?$("#identityConfirmationModal").modal({show:!0,backdrop:"static",keyboard:!1}):($(this).prop("disabled",!0),e.submit()),!1}),$("body").on("click","[data-loading-text]",function(){var e=$(this).data("form");null!=e?$(e).valid()&&$(this).button("loading"):$(this).button("loading")}),$("#survey_form").validate();var t=$("#survey_form").find('[data-required="1"]');$.each(t,function(){$(this).rules("add",{required:!0});var e=$(this).data("for"),t=$(this).parents(".form-group").find('[for="'+e+'"]');t.length>0&&0==t.find(".req").length&&t.prepend(' <small class="req text-danger">* </small>')})});